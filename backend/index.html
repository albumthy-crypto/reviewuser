<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <!-- Load Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Load Inter font -->
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap");

      /* Variables */
      :root {
        --color-primary: #4f46e5; /* Indigo 600 */
        --color-primary-light: #eef2ff; /* Indigo 50 */
        --color-primary-hover: #e0e7ff; /* Indigo 100 */
        --color-text-dark: #1f2937; /* Gray 800/900 for dark text */
        --color-text-medium: #4b5563; /* Gray 700 */
        --color-text-light: #6b7280; /* Gray 500 */
        --color-red: #ef4444; /* Red 600 */
        --color-yellow: #f59e0b; /* Yellow 400 */
        --color-green: #10b981; /* Green 400 */
        --color-bg-light: #f3f4f6; /* Gray 100 */
        --color-border: #d1d5db; /* Gray 300 */
        --color-white: #ffffff;
        --sidebar-width: 15rem; /* 240px (w-60) */
        --sidebar-width-collapsed: 4.5rem; /* 72px (Collapsed state) */
      }

      /* Base Styles */
      body {
        font-family: "Inter", sans-serif;
        background-color: var(--color-bg-light);
        margin: 0;
        padding: 0;
        color: var(--color-text-medium);
        transition: background-color 0.3s ease;
        height: 100vh; /* CRITICAL: Ensure body fills viewport */
        overflow: hidden; /* Prevent body scroll, scrolling is handled by main-content */
      }

      /* Layout Container */
      .app {
        display: block; /* Fixed elements dictate the flow */
        height: 100vh;
      }

      /* Custom CSS preserved for the glass effect on sidebar */
      .glass-sidebar {
        background-color: rgba(
          255,
          255,
          255,
          0.9
        ); /* More opaque for better contrast */
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
      }

      /* Helper class for hiding content sections */
      .view.hidden {
        display: none !important;
      }

      /* ==================
           Sidebar (Fixed)
           ================== */

      /* Mobile Sidebar Toggle Button */
      .sidebar-toggle-btn {
        display: block; /* Visible on mobile screens */
        position: fixed;
        top: 0.75rem; /* 12px */
        left: 0.75rem; /* 12px */
        z-index: 50;
        padding: 0.5rem;
        background-color: var(--color-primary);
        color: var(--color-white);
        border-radius: 0.5rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        border: none;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      /* Desktop Sidebar Toggle Button */
      .sidebar-desktop-toggle-btn {
        display: none; /* Default hidden */
        position: absolute;
        bottom: 1rem;
        right: 1rem;
        padding: 0.5rem;
        background-color: var(--color-primary-light);
        color: var(--color-primary);
        border-radius: 9999px;
        border: none;
        cursor: pointer;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px -1px rgba(0, 0, 0, 0.1);
        transition: background-color 0.2s ease, transform 0.2s ease;
      }

      .sidebar-desktop-toggle-btn:hover {
        background-color: var(--color-primary-hover);
        transform: scale(1.05);
      }

      .sidebar {
        width: var(--sidebar-width);
        position: fixed; /* STICKY/FIXED */
        top: 0;
        left: 0;
        z-index: 40;
        height: 100vh; /* FULL HEIGHT */
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        transition: width 0.3s ease, transform 0.3s ease-in-out;
        transform: translateX(-100%); /* Hidden by default on mobile */
        border-right: 1px solid var(--color-border);
        padding: 1rem;
      }

      /* Mobile visible state */
      .sidebar-mobile-visible {
        transform: translateX(0);
      }

      /* Collapsed Sidebar State (Desktop) */
      .sidebar-collapsed {
        width: var(--sidebar-width-collapsed);
        padding: 1rem 0.5rem;
      }

      /* Hide non-icon content when collapsed */
      .sidebar-collapsed .brand-text,
      .sidebar-collapsed .label,
      .sidebar-collapsed .footer {
        display: none;
      }

      /* Center the logo when collapsed */
      .sidebar-collapsed .brand {
        justify-content: center;
        padding-left: 0;
        padding-right: 0;
      }

      /* Center and adjust link padding when collapsed */
      .sidebar-collapsed .nav-link {
        justify-content: center;
        padding: 0.75rem 0.5rem;
        gap: 0;
      }
      .sidebar-collapsed .nav-link .icon {
        margin-right: 0;
      }

      /* Desktop styles (lg: 1024px and up) */
      @media (min-width: 1024px) {
        .sidebar-toggle-btn {
          display: none;
        }
        .sidebar {
          position: fixed; /* Stays fixed */
          transform: translateX(0) !important; /* Always visible on desktop */
          border-radius: 0;
          box-shadow: none;
        }
        .sidebar-desktop-toggle-btn {
          display: block;
        }
        /* Reset the default sidebar width for desktop */
        .sidebar:not(.sidebar-collapsed) {
          width: var(--sidebar-width);
        }
      }

      /* Footer inside sidebar (uses flex-grow: 1 on .spacer to push it down) */
      .footer {
        padding-top: 1rem;
        border-top: 1px solid var(--color-border);
        margin-top: 1rem;
        transition: opacity 0.15s ease;
      }

      /* ==================
           Main Content Area (Scroll Isolation)
           ================== */

      .main-container {
        /* This container will hold the Topbar and the Scrollable Content */
        display: flex;
        flex-direction: column;
        height: 100vh; /* Critical: Fixed height for internal scrolling */
        overflow: hidden;

        /* Initial Margin for Desktop (Pushed right by the sidebar) */
        margin-left: 0; /* Default on mobile */
        width: 100%;
        transition: margin-left 0.3s ease, width 0.3s ease;
      }

      @media (min-width: 1024px) {
        .main-container {
          /* Set initial position based on non-collapsed sidebar */
          margin-left: var(--sidebar-width);
          width: calc(100% - var(--sidebar-width));
        }

        .main-container.collapsed {
          margin-left: var(--sidebar-width-collapsed);
          width: calc(100% - var(--sidebar-width-collapsed));
        }
      }

      /* TOPBAR (STICKY/FIXED HEADER) */
      .topbar-nav {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        height: 4rem;
        background-color: var(--color-white);
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        padding-left: 1.5rem;
        padding-right: 1.5rem;
        flex-shrink: 0; /* Prevents topbar from shrinking */

        /* STICKY NAVBAR implementation */
        position: sticky;
        top: 0;
        z-index: 20; /* Ensure it stays above content */
      }

      /* MAIN SCROLLABLE CONTENT AREA */
      .main-content {
        flex: 1; /* Takes up all remaining vertical space */
        padding: 1.5rem;
        overflow-y: auto; /* CRITICAL: Isolates scrolling here */
        /* Removed old flex: 1; overflow: hidden; */
      }

      /* ... (rest of styles like card, modal, dark mode) ... */

      /* ==================
           Dark Mode Styling
           ================== */

      body.dark-mode {
        background-color: #1e293b;
        color: #e2e8f0;
      }

      body.dark-mode .bg-white,
      body.dark-mode .topbar-nav,
      body.dark-mode .card,
      body.dark-mode .activity-log,
      body.dark-mode .user-dropdown-menu,
      body.dark-mode .modal-content {
        background-color: #334155;
      }

      body.dark-mode .glass-sidebar {
        background-color: rgba(0, 0, 0, 0.7);
        border-color: rgba(0, 0, 0, 0.5);
      }
      /* ... (rest of dark mode styles) ... */
    </style>
  </head>

  <body>
    <div id="app-wrapper" class="app">
      <!-- Sidebar Toggle Button (Mobile) -->
      <!-- Placed here for higher z-index/visibility -->
      <button id="sidebar-toggle-mobile" class="sidebar-toggle-btn">
        <i class="fas fa-bars"></i>
      </button>

      <!-- SIDEBAR (FIXED) -->
      <aside id="sidebar" class="sidebar glass-sidebar">
        <!-- Brand Section -->
        <div class="brand" role="banner">
          <img
            src="https://placehold.co/40x40/6366f1/ffffff?text=B"
            alt="Thy Logo"
            class="logo"
          />

          <div class="brand-text">
            <h1 class="brand-title">USER Verification</h1>
            <div class="brand-subtitle">Admin Dashboard</div>
          </div>
        </div>

        <!-- Navigation Links -->
        <nav class="navSide" aria-label="Main">
          <a href="#" class="nav-link active" data-target="overview">
            <i class="fas fa-home icon"></i>
            <span class="label">Overview</span>
          </a>
          <a href="#" class="nav-link" data-target="users">
            <i class="fas fa-user icon"></i>
            <span class="label">Users</span>
          </a>
          <a href="#" class="nav-link" data-target="reports">
            <i class="fas fa-chart-bar icon"></i>
            <span class="label">Reports</span>
          </a>
          <a href="#" class="nav-link" data-target="settings">
            <i class="fas fa-cog icon"></i>
            <span class="label">Settings</span>
          </a>
          <a href="#" class="nav-link" data-target="help">
            <i class="fas fa-question-circle icon"></i>
            <span class="label">Help</span>
          </a>
        </nav>

        <!-- Spacer - Pushes footer down -->
        <div class="spacer"></div>

        <!-- Sidebar Toggle Button (Desktop) -->
        <button id="sidebar-toggle-desktop" class="sidebar-desktop-toggle-btn">
          <i class="fas fa-chevron-left"></i>
        </button>

        <!-- Footer (STICKY/FIXED at bottom of sidebar) -->
        <footer class="footer">
          <div class="footer-text">
            Â© <strong class="footer-strong">RUT24</strong> 2025
          </div>
        </footer>
      </aside>

      <!-- MAIN CONTENT CONTAINER (100vh Flex Column) -->
      <div class="main-container">
        <!-- TOPBAR (STICKY NAVBAR) -->
        <div class="topbar-nav">
          <!-- User Profile Dropdown -->
          <div class="user-dropdown-wrapper">
            <button
              id="userDropdown"
              type="button"
              class="user-dropdown-btn"
              aria-expanded="false"
              aria-haspopup="true"
            >
              Admin User
              <img
                class="user-avatar"
                src="https://placehold.co/32x32/6366f1/ffffff?text=AU"
                alt="User Avatar"
              />
            </button>

            <!-- Dropdown menu (using placeholder JS for interaction) -->
            <div
              id="userToggleMenu"
              class="user-dropdown-menu hidden opacity-0 scale-95"
              role="menu"
              aria-orientation="vertical"
              aria-labelledby="userDropdown"
            >
              <div class="menu-section" role="none">
                <a href="#" class="dropdown-item rounded-t" role="menuitem">
                  <i
                    class="fas fa-user fa-sm fa-fw icon-small-mr icon-indigo"
                  ></i>
                  Profile
                </a>
                <a href="#" class="dropdown-item" role="menuitem">
                  <i
                    class="fas fa-cogs fa-sm fa-fw icon-small-mr icon-indigo"
                  ></i>
                  Settings
                </a>
                <a href="#" class="dropdown-item" role="menuitem">
                  <i
                    class="fas fa-list fa-sm fa-fw icon-small-mr icon-indigo"
                  ></i>
                  Activity Log
                </a>
              </div>
              <div class="menu-section border-t" role="none">
                <a
                  href="#"
                  id="theme-toggle"
                  class="dropdown-item"
                  role="menuitem"
                >
                  <i
                    class="fas fa-moon theme-icon fa-sm fa-fw icon-small-mr icon-gray"
                  ></i>
                  Dark Mode
                </a>
              </div>
              <div class="menu-section border-t" role="none">
                <a
                  href="#"
                  class="dropdown-item text-red rounded-b"
                  role="menuitem"
                  onclick="showModal()"
                >
                  <i class="fas fa-sign-out-alt fa-sm fa-fw icon-small-mr"></i>
                  Logout
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- MAIN CONTENT AREA (SCROLLABLE) -->
        <main class="main-content">
          <h2 class="main-title" id="main-header-title">Overview</h2>

          <!-- 1. OVERVIEW VIEW (Default Dashboard Content) -->
          <div id="overview-view" class="view">
            <!-- Dashboard Cards -->
            <div class="dashboard-grid">
              <!-- Example Card 1 -->
              <div class="card">
                <div class="card-header">
                  <p class="card-text">Total Users</p>
                  <i class="fas fa-users card-icon-indigo"></i>
                </div>
                <p class="card-value">1,234</p>
              </div>
              <!-- Example Card 2 -->
              <div class="card">
                <div class="card-header">
                  <p class="card-text">Pending Reviews</p>
                  <i class="fas fa-hourglass-half card-icon-yellow"></i>
                </div>
                <p class="card-value">42</p>
              </div>
              <!-- Example Card 3 -->
              <div class="card">
                <div class="card-header">
                  <p class="card-text">New Reports</p>
                  <i class="fas fa-flag card-icon-red"></i>
                </div>
                <p class="card-value">5</p>
              </div>
              <!-- Example Card 4 -->
              <div class="card">
                <div class="card-header">
                  <p class="card-text">Active Sessions</p>
                  <i class="fas fa-globe card-icon-green"></i>
                </div>
                <p class="card-value">87</p>
              </div>
            </div>

            <!-- Placeholder for dynamic content -->
            <div class="activity-log">
              <h3 class="activity-log-title">Latest Activity Log</h3>
              <!-- Add a lot of content here to test scrolling -->
              <p class="activity-log-text">
                This is the default dashboard view containing key metrics and
                recent activity.
              </p>
              <br />
              <p class="activity-log-text">
                Scroll Test Content Line 1. This content ensures the main area
                is long enough to demonstrate that the Navbar and Sidebar remain
                fixed while this section scrolls.
              </p>
              <p class="activity-log-text">
                Scroll Test Content Line 2. Notice how the top navigation bar
                sticks firmly to the top of the scrollable area, and the sidebar
                remains fixed on the left.
              </p>
              <p class="activity-log-text">
                Scroll Test Content Line 3. We use a combination of `height:
                100vh`, `display: flex`, and `overflow-y: auto` to isolate the
                scrollbar to this main section.
              </p>
              <p class="activity-log-text">
                Scroll Test Content Line 4. This ensures a clean user experience
                without multiple scrollbars.
              </p>
              <p class="activity-log-text">
                Scroll Test Content Line 5. Keep scrolling to see the full
                effect.
              </p>
              <p class="activity-log-text">Scroll Test Content Line 6.</p>
              <p class="activity-log-text">Scroll Test Content Line 7.</p>
              <p class="activity-log-text">Scroll Test Content Line 8.</p>
              <p class="activity-log-text">Scroll Test Content Line 9.</p>
              <p class="activity-log-text">Scroll Test Content Line 10.</p>
              <p class="activity-log-text">Scroll Test Content Line 11.</p>
              <p class="activity-log-text">Scroll Test Content Line 12.</p>
              <p class="activity-log-text">Scroll Test Content Line 13.</p>
              <p class="activity-log-text">Scroll Test Content Line 14.</p>
              <p class="activity-log-text">Scroll Test Content Line 15.</p>
              <p class="activity-log-text">Scroll Test Content Line 16.</p>
              <p class="activity-log-text">Scroll Test Content Line 17.</p>
              <p class="activity-log-text">Scroll Test Content Line 18.</p>
              <p class="activity-log-text">Scroll Test Content Line 19.</p>
              <p class="activity-log-text">
                Scroll Test Content Line 20. End of scroll test content.
              </p>
            </div>
          </div>

          <!-- 2. USERS VIEW (Blank Page as requested) -->
          <div id="users-view" class="view hidden">
            <div
              style="
                background-color: var(--color-white);
                padding: 2rem;
                border-radius: 0.75rem;
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
              "
            >
              <h3
                style="
                  font-size: 1.5rem;
                  font-weight: 700;
                  color: var(--color-text-dark);
                  margin-bottom: 0.5rem;
                "
              >
                User Management
              </h3>
              <p style="color: var(--color-text-medium)">
                This page is intentionally left blank for you to add user tables
                or management forms.
              </p>
            </div>
          </div>

          <!-- 3. GENERIC VIEW (For all other non-dashboard views) -->
          <div id="generic-view" class="view hidden">
            <div
              style="
                background-color: var(--color-white);
                padding: 2rem;
                border-radius: 0.75rem;
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
              "
            >
              <h3
                id="generic-view-title"
                style="
                  font-size: 1.5rem;
                  font-weight: 700;
                  color: var(--color-text-dark);
                  margin-bottom: 0.5rem;
                "
              >
                Reports Placeholder
              </h3>
              <p style="color: var(--color-text-medium)">
                Content for this administrative section (Reports, Settings, or
                Help) will appear here.
              </p>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Custom Modal Structure -->
    <div id="logoutModal" class="modal-overlay hidden">
      <div class="modal-content">
        <h3 class="modal-title">Ready to Leave?</h3>
        <p class="modal-text">
          Select "Logout" below if you are ready to end your current session.
        </p>
        <div class="modal-actions">
          <button onclick="hideModal()" class="btn-cancel">Cancel</button>
          <button onclick="console.log('Logging out...')" class="btn-logout">
            Logout
          </button>
        </div>
      </div>
    </div>

    <script>
      // --- Core Application Logic ---

      const sidebar = document.getElementById("sidebar");
      const toggleButtonMobile = document.getElementById(
        "sidebar-toggle-mobile"
      );
      const toggleButtonDesktop = document.getElementById(
        "sidebar-toggle-desktop"
      );
      const mainContainer = document.querySelector(".main-container"); // Used for desktop margin adjustments
      const dropdownButton = document.getElementById("userDropdown");
      const dropdownMenu = document.getElementById("userToggleMenu");
      const logoutModal = document.getElementById("logoutModal");
      const themeToggle = document.getElementById("theme-toggle");
      const mainHeaderTitle = document.getElementById("main-header-title");

      // View Containers
      const viewContainers = {
        overview: document.getElementById("overview-view"),
        users: document.getElementById("users-view"),
        generic: document.getElementById("generic-view"),
      };
      const genericViewTitle = document.getElementById("generic-view-title");

      // Function to show the correct view
      function switchView(target) {
        // 1. Hide all views
        Object.values(viewContainers).forEach((view) => {
          view.classList.add("hidden");
        });

        // 2. Set the main header title
        // Capitalize the first letter for the display title
        mainHeaderTitle.textContent =
          target.charAt(0).toUpperCase() + target.slice(1);

        // 3. Show the correct view based on the target
        if (target === "overview") {
          viewContainers.overview.classList.remove("hidden");
        } else if (target === "users") {
          viewContainers.users.classList.remove("hidden");
        } else {
          // Use the generic view for Reports, Settings, Help, etc.
          genericViewTitle.textContent =
            target.charAt(0).toUpperCase() + target.slice(1) + " Placeholder";
          viewContainers.generic.classList.remove("hidden");
        }
      }

      // 1. Sidebar Toggle (Mobile Responsiveness)
      toggleButtonMobile.addEventListener("click", () => {
        sidebar.classList.toggle("sidebar-mobile-visible");
      });

      // 2. Sidebar Toggle (Desktop Collapse)
      toggleButtonDesktop.addEventListener("click", () => {
        const isCollapsed = sidebar.classList.toggle("sidebar-collapsed");
        // Toggle collapsed class on main-container to adjust margin-left/width
        mainContainer.classList.toggle("collapsed", isCollapsed);

        // Toggle chevron icon direction
        const icon = toggleButtonDesktop.querySelector(".fas");
        icon.classList.toggle("fa-chevron-left", !isCollapsed);
        icon.classList.toggle("fa-chevron-right", isCollapsed);
      });

      // 3. User Dropdown Toggle
      dropdownButton.addEventListener("click", (e) => {
        e.stopPropagation();
        const isVisible = dropdownMenu.classList.toggle("hidden");
        dropdownMenu.classList.toggle("opacity-0", !isVisible);
        dropdownMenu.classList.toggle("scale-95", !isVisible);
        dropdownMenu.classList.toggle("scale-100", isVisible);
      });

      document.addEventListener("click", (e) => {
        if (
          !dropdownButton.contains(e.target) &&
          !dropdownMenu.contains(e.target)
        ) {
          dropdownMenu.classList.add("hidden", "opacity-0", "scale-95");
          dropdownMenu.classList.remove("scale-100");
        }
      });

      // 4. Modal Functions
      function showModal() {
        logoutModal.classList.remove("hidden");
      }

      function hideModal() {
        logoutModal.classList.add("hidden");
      }

      // 5. Dark Mode Toggle (Simplified Example)
      themeToggle.addEventListener("click", (e) => {
        e.preventDefault();
        document.body.classList.toggle("dark-mode");
        // Update the icon and text to reflect the current state
        const icon = themeToggle.querySelector(".theme-icon");
        const isDark = document.body.classList.contains("dark-mode");
        icon.classList.toggle("fa-sun", isDark);
        icon.classList.toggle("fa-moon", !isDark);
        themeToggle.lastChild.textContent = isDark
          ? " Light Mode"
          : " Dark Mode";
      });

      // 6. Navigation State and Content Toggle
      document.querySelectorAll(".nav-link").forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();

          // 6a. Remove active class from all and add to clicked link
          document.querySelectorAll(".nav-link").forEach((l) => {
            l.classList.remove("active");
          });
          link.classList.add("active");

          // 6b. Switch the content view
          const target = link.getAttribute("data-target");
          switchView(target);

          // 6c. Hide sidebar on mobile after click
          if (window.innerWidth < 1024) {
            sidebar.classList.remove("sidebar-mobile-visible");
          }
        });
      });

      // 7. Initial setup to ensure the correct view is shown on load
      window.addEventListener("load", () => {
        switchView("overview");
      });
    </script>
  </body>
</html>
